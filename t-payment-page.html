<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../t-notify/t-notify.html">
<link rel="import" href="../t-address/t-address.html">
<link rel="import" href="../t-creditcard/t-creditcard.html">
<link rel="import" href="../t-checkbox/t-checkbox.html">
<link rel="import" href="../t-button/t-button.html">
<link rel="import" href="../t-section-header/t-section-header.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html" />

<dom-module id="t-payment-page">
  <template>
    <style include="iron-flex-layout-classes"></style>
    <style include="travel-element-styles">
      :host, t-button {
        display: block;
      }
    </style>

    <content select="t-header"></content>

    <t-notify id="notify"></t-notify>

    <t-section-header 
        id="paymentHeader" 
        label="Payment Information">              
    </t-section-header>

    <t-creditcard id="creditCard"></t-creditcard>

    <t-address 
        id="address"
        country-api="[[apiBaseUrl]]api/content/countries"
        base-geo-api="[[apiBaseUrl]]api/content"
        query-params="?token=[[authToken]]">          
    </t-address>

    <div class="layout horizontal start section-small">
        <t-checkbox id="acceptance" checked="{{checked}}"><div hidden>something</div></t-checkbox>
        <div class="flex font-12 secondary-text">
            I have read and accept the <a class="link-style" on-click="showPolicies">Booking Policies</a>, <a href="http://www.bluegreenvacations.com/terms-of-use" class="link-style" target="_blank">Terms & Conditions</a> and <a href="http://www.bluegreenvacations.com/privacy-policy" class="link-style" target="_blank">Privacy Policy</a>.
        </div>
    </div>

    <div class="layout horizontal section-small">
        <t-button label="Pay now" id="submit" class="primary flex" disabled="{{!checked}}" on-click="bookNow"></t-button>
    </div>

  </template>

  <script>
    Polymer({

      is: 't-payment-page',

      properties: {

          /*
           * <p>This string is query string containing token value</p>
          */
          authToken: {
              type: String,
              value: ''
          },

          /*
           * <p>This property holds the value of api base URL</p>
          */
          apiBaseUrl: {
              type: String,
              value: ''
          },

          /*
           * <p>This property holds the value of web api URL format</p>
          */
          apiUrlFormat: {
              type: String,
              value: ''
          },

          /*
           * <p>This property holds the value of web api URL format</p>
          */
          itinerary: {
              type: Object,
              observer:'_onItineraryUpdate'
          },
      },

      _onItineraryUpdate: function () {
          this.$.address.pullCountryList();
      }

    });
  </script>
</dom-module>
